version: 2

updates:
  # Go modules - main project components
  - package-ecosystem: "gomod"
    directories:
      - "/"
      - "/api"
      - "/lidia"
    schedule:
      interval: weekly
    open-pull-requests-limit: 10
    ignore:
      - dependency-name: "*"
        update-types: ["version-update:semver-major"]
    groups:
      gomod:
        patterns:
          - "*"

  # npm/yarn - main project
  - package-ecosystem: "npm"
    directories:
      - "/"
    schedule:
      interval: weekly
    ignore:
      - dependency-name: "*"
        update-types: ["version-update:semver-major"]
    groups:
      npm:
        patterns:
          - "*"

  # Docker - main project
  - package-ecosystem: "docker"
    directories:
      - "/cmd/pyroscope"
    schedule:
      interval: monthly
    ignore:
      - dependency-name: "*"
        update-types: ["version-update:semver-major"]
    groups:
      docker:
        patterns:
          - "*"

  # Dev containers - main project
  - package-ecosystem: "devcontainers"
    directories:
      - "/"
    schedule:
      interval: weekly

  # GitHub Actions
  - package-ecosystem: "github-actions"
    directories:
      - "/"
    schedule:
      interval: weekly
    groups:
      github-actions:
        patterns:
          - "*"

  # Go modules - examples (only pyroscope-go package)
  - package-ecosystem: "gomod"
    directories:
      - "/examples/golang-pgo"
      - "/examples/language-sdk-instrumentation/golang-push/rideshare-alloy"
      - "/examples/language-sdk-instrumentation/golang-push/rideshare-k6"
      - "/examples/language-sdk-instrumentation/golang-push/rideshare"
      - "/examples/language-sdk-instrumentation/golang-push/simple"
      - "/examples/tracing/golang-push"
    schedule:
      interval: weekly
    allow:
      - dependency-name: "github.com/grafana/pyroscope-go"
    groups:
      examples-gomod:
        patterns:
          - "*"
