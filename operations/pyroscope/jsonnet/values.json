{
  "ingress": {
    "enabled": false
  },
  "minio": {
    "buckets": [
      {
        "name": "grafana-phlare-data",
        "policy": "none",
        "purge": false
      }
    ],
    "drivesPerNode": 2,
    "enabled": false,
    "persistence": {
      "size": "5Gi"
    },
    "podAnnotations": {
      "phlare.grafana.com/port": "9000",
      "phlare.grafana.com/scrape": "true"
    },
    "replicas": 1,
    "resources": {
      "requests": {
        "cpu": "100m",
        "memory": "128Mi"
      }
    },
    "rootPassword": "supersecret",
    "rootUser": "grafana-phlare"
  },
  "phlare": {
    "affinity": {},
    "components": {},
    "config": "{{- if .Values.minio.enabled }}\nstorage:\n  backend: s3\n  s3:\n    endpoint: \"{{ include \"phlare.fullname\" . }}-minio:9000\"\n    bucket_name: {{(index .Values.minio.buckets 0).name | quote }}\n    access_key_id: {{ .Values.minio.rootUser | quote }}\n    secret_access_key: {{ .Values.minio.rootPassword | quote }}\n    insecure: true\n{{- end }}\n# The default scrape config allows to define annotations based scraping.\n#\n# For example the following annotations:\n#\n# ```\n# profiles.grafana.com/memory.scrape: \"true\"\n# profiles.grafana.com/memory.port: \"8080\"\n# profiles.grafana.com/cpu.scrape: \"true\"\n# profiles.grafana.com/cpu.port: \"8080\"\n# profiles.grafana.com/goroutine.scrape: \"true\"\n# profiles.grafana.com/goroutine.port: \"8080\"\n# ```\n#\n# will scrape the `memory`, `cpu` and `goroutine` profiles from the `8080` port of the pod.\n#\n# For more information see https://grafana.com/docs/phlare/latest/operators-guide/deploy-kubernetes/#optional-scrape-your-own-workloads-profiles\nscrape_configs:\n  - job_name: 'kubernetes-pods-memory-default-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: true\n        block:\n          enabled: false\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_port_name]\n        action: keep\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_memory_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-memory-custom-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: true\n        block:\n          enabled: false\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_port_name]\n        action: drop\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_container_port_name']\n        target_label: '__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_port_name'\n        action: 'keepequal'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_memory_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_memory_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-cpu-default-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: false\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: true\n          delta: true\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_port_name]\n        action: keep\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-cpu-custom-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: false\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: true\n          delta: true\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_port_name]\n        action: drop\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_container_port_name']\n        target_label: '__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_port_name'\n        action: 'keepequal'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_cpu_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-block-default-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: true\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_block_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_block_port_name]\n        action: keep\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_block_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_block_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_block_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-block-custom-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: true\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_block_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_block_port_name]\n        action: drop\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_container_port_name']\n        target_label: '__meta_kubernetes_pod_annotation_profiles_grafana_com_block_port_name'\n        action: 'keepequal'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_block_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_block_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_block_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-mutex-default-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: false\n        mutex:\n          enabled: true\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_port_name]\n        action: keep\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-mutex-custom-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: false\n        mutex:\n          enabled: true\n        goroutine:\n          enabled: false\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_port_name]\n        action: drop\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_container_port_name']\n        target_label: '__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_port_name'\n        action: 'keepequal'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_mutex_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-goroutine-default-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: false\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: true\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_port_name]\n        action: keep\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n  - job_name: 'kubernetes-pods-goroutine-custom-name'\n    scrape_interval: \"15s\"\n    kubernetes_sd_configs:\n      - role: pod\n    profiling_config:\n      pprof_config:\n        memory:\n          enabled: false\n        block:\n          enabled: false\n        mutex:\n          enabled: false\n        goroutine:\n          enabled: true\n        process_cpu:\n          enabled: false\n    relabel_configs:\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_scrape]\n        action: keep\n        regex: true\n      - source_labels: [__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_port_name]\n        action: drop\n        regex: ''\n      - source_labels: ['__meta_kubernetes_pod_container_port_name']\n        target_label: '__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_port_name'\n        action: 'keepequal'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_scheme']\n        action: 'replace'\n        target_label: '__scheme__'\n        regex: '(https?)'\n        replacement: '$1'\n      - source_labels: ['__meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_path']\n        action: 'replace'\n        target_label: '__profile_path__'\n        regex: '(.+)'\n        replacement: '$1'\n      - source_labels: [__address__, __meta_kubernetes_pod_annotation_profiles_grafana_com_goroutine_port]\n        action: replace\n        regex: (.+?)(?::\\d+)?;(\\d+)\n        replacement: $1:$2\n        target_label: __address__\n      - action: labelmap\n        regex: __meta_kubernetes_pod_label_(.+)\n      - source_labels: [__meta_kubernetes_namespace]\n        action: replace\n        target_label: namespace\n      - source_labels: [__meta_kubernetes_pod_name]\n        action: replace\n        target_label: pod\n      - source_labels: ['__meta_kubernetes_pod_container_name']\n        action: 'replace'\n        target_label: 'container'\n      - source_labels: [__meta_kubernetes_pod_phase]\n        regex: Pending|Succeeded|Failed|Completed\n        action: drop\n",
    "extraArgs": {
      "log.level": "debug"
    },
    "extraEnvFrom": [],
    "extraEnvVars": {},
    "extraLabels": {},
    "extraVolumeMounts": [],
    "extraVolumes": [],
    "fullnameOverride": "",
    "image": {
      "pullPolicy": "IfNotPresent",
      "repository": "grafana/phlare",
      "tag": "0.5.1"
    },
    "imagePullSecrets": [],
    "memberlist": {
      "port": 7946,
      "port_name": "memberlist"
    },
    "nameOverride": "",
    "nodeSelector": {},
    "persistence": {
      "accessModes": [
        "ReadWriteOnce"
      ],
      "annotations": {},
      "enabled": false,
      "size": "10Gi"
    },
    "podAnnotations": {
      "profiles.grafana.com/cpu.port_name": "http2",
      "profiles.grafana.com/cpu.scrape": "true",
      "profiles.grafana.com/goroutine.port_name": "http2",
      "profiles.grafana.com/goroutine.scrape": "true",
      "profiles.grafana.com/memory.port_name": "http2",
      "profiles.grafana.com/memory.scrape": "true"
    },
    "podSecurityContext": {
      "fsGroup": 10001,
      "runAsNonRoot": true,
      "runAsUser": 10001
    },
    "replicaCount": 1,
    "resources": {},
    "securityContext": {},
    "service": {
      "port": 4100,
      "port_name": "http2",
      "type": "ClusterIP"
    },
    "serviceAccount": {
      "annotations": {},
      "create": true,
      "name": ""
    },
    "structuredConfig": {},
    "tenantOverrides": {},
    "tolerations": []
  }
}